$color_1: var(--font-active);
$color_2: var(--font-disabled);
$font-family_1: monospace;
$background-color_1: var(--tick-box-background);
$background-color_2: var(--input-box-background);
$background-color_3: var(--tick-box-checked-background);
$border-color_1: var(--input-border-default);
$border-color_2: var(--focus-border);
$border-color_3: var(--tick-border-checked);

@keyframes check {
    50% {
        transform: scale(1.2);
    }
}

.todo-wrapper {
    position: relative;
    width: 100%;
    margin: 0.2em 0;
    --tick-box-background: #bfdeef;
    --tick-box-checked-background: #9fb9c7;
    --input-box-background: #d9ecf7;
    --input-border-default: #69696a;
    --input-border-focus: #b9b8c3;
    --tick-border-checked: #b4c8d3;
    --border-shadow: #00000040;
    --white: #ffffff;
    --font-active: #83caf0;
    --font-disabled: #d8d8d8;
    --strike-line: #e3e3e3;
    --blink-color: rgb(170, 225, 255);
    --focus-border: rgb(198, 226, 241);

    input {
        appearance: none;
        border: 0.1em solid var(--input-border);
        box-shadow: 0.1em 0.1em 0.4em var(--border-shadow);
    }

    .cbx {
        -webkit-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        height: 100%;
        width: 100%;
        position: relative;
        display: grid;
        grid-template-columns: 0.5fr 2fr;
        grid-template-rows: 100%;
        grid-template-areas: "tick-box input-field";
        column-gap: 5%;

        span {
            transform: translate3d(0, 0, 0);
            outline: none;
        }

        .tick-box {
            display: grid;
            grid-area: tick-box;
            position: relative;
            background-color: $background-color_1;
            width: 1.5em;
            border-radius: 30%;
            transform: scale(1);
            border: 0.1em solid var(--input-border-default);
            transition: all 0.2s ease;

            svg {
                position: absolute;
                top: 0.2em;
                left: 0.2em;
                z-index: 1;
                width: 80%;
                height: 70%;
                fill: none;
                stroke: white;
                stroke-width: 2;
                stroke-linecap: round;
                stroke-linejoin: round;
                stroke-dasharray: 16px;
                stroke-dashoffset: 16px;
                transition: all 0.3s ease;
                transition-delay: 0.1s;
                transform: translate3d(0, 0, 0);
            }

            &:before {
                content: "";
                width: 100%;
                height: 100%;
                background: var(--blink-color);
                display: block;
                transform: scale(0);
                opacity: 1;
                border-radius: 50%;
                transition-delay: 0.2s;
            }
        }

        .input-box {
            display: grid;
            grid-area: input-field;
            width: 100%;

            &:after {
                content: "";
                position: absolute;
                top: 0.7em;
                left: 0;
                height: 1px;
                width: 100%;
                background: var(--strike-line);
                transform-origin: 0 0;
                transform: scaleX(0);
            }
        }

        .input-field {
            width: 100%;
            height: 100%;
            border-radius: 0.4em;
            color: $color_1;
            border: 1.5px solid $border-color_1;
            background-color: $background-color_2;
            font-family: $font-family_1;

            &:focus {
                outline: none;
            }

            &:focus-visible {
                outline: none;
            }
        }

        &:hover {
            .tick-box {
                border-color: $border-color_2;
            }

            .input-field {
                border-color: $border-color_2;
            }
        }
    }

    .tick-box {
        &:checked + .cbx {
            .tick-box {
                border-color: $border-color_3;
                background: var(--tick-box-checked-background);
                animation: check 0.6s ease;

                svg {
                    stroke-dashoffset: 0;
                }

                &:before {
                    transform: scale(2.2);
                    opacity: 0;
                    transition: all 0.6s ease;
                }
            }

            .input-field {
                border-color: $border-color_3;
                background: var(--tick-box-checked-background);
                color: $color_2;
                background-color: $background-color_3;
                transition: all 0.3s ease;
            }

            .input-box {
                &:after {
                    transform: scaleX(1);
                    transition: all 0.3s ease;
                }
            }
        }
    }
}
